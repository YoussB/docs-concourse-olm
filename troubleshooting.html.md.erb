---
title: Monitoring and Troubleshooting Your Installation
owner: Concourse
---

This topic should include:

- Information on common errors and what to do about them
- What logs are available and how to access them.
- Fly commands that may be useful for troubleshooting


## Metrics

http://concourse.ci/metrics.html


## Logs

https://bosh.io/docs/job-logs.html

You can run `bosh logs` on your Concourse OLM VM instances


## Troubleshooting

### Concourse Environment Troubleshooting
  
#### `fly workers`: Listing registered workers
   - useful to verify that the number of containers aren't exceeding the 250 container per worker maximum
   - can use the worker name to derive the VM name

#### `fly containers`: Listing active containers
   - check which worker a container was placed on
  
#### `fly volumes`: Listing active volumes
   - check which worker a volume was placed on
  
#### `fly prune-worker`: Reap a non-running worker
   - stop concourse from tracking an out-of-commission worker


### Pipeline Troubleshooting
#### `fly pipelines`: Listing configured pipelines
  
#### `fly builds`: Showing build history
   - useful for getting build ids of one-off tasks run using execute
  
#### `fly validate-pipeline`: Validate a pipeline's configuration
   - check pipeline for validity without calling set-pipeline
  
#### `fly check-resource`: Trigger discovery of new versions
  - Necessary to grab versions of the resource in the past
  
#### `fly watch`: View logs of in-progress builds
  
#### `fly intercept`: Accessing the container of a running or recent build's step
- This will put you in the actual container that ran the step, which lets you interact with the system to debug

#### `fly execute`: Submitting Local Tasks
   - spinning up a task quickly to test before putting it in a job


### Common Bosh Issues
https://bosh.io/docs/tips.html

### Common Concourse Issues

#### Worker Out of Disk Space

 Symptoms:
  - cannot create volume: permissions denied (approximate error wording)
 Solution:
  - increase persistent disk for worker or increase number of worker vms

#### Container Limit Reached (unlikely)
  Symptoms:
   - cannot create container: limit of 250 containers reached
  Solution:
   - check fly containers
   - increase number of worker vms
   - decrease [`gc_interval`](https://bosh.io/jobs/atc?source=github.com/concourse/concourse#p=gc_interval) on the `atc` in your BOSH manifest, if set to custom value. A large interval could mean that expired containers are kept around long enough that they build up

#### Build Stuck in Pending State
  
  Solution:
  - restart atc job
   -> This can be done either by logging in as a root user ([`bosh ssh`](https://bosh.io/docs/sysadmin-commands.html#ssh)) on Concourse web VMs (the ones on which atc job is located.) Then running `monit restart atc`
   -> Or by running `bosh restart web --force`, which will be slower than previous option.

#### "Redeploy Concourse" Job never finishes
  Symptom
  - The worker draining script waits for all jobs to finish. The "Redeploy Concourse" job will be stuck waiting for itself to finish, leading to the Job never finishing.

  Solution:
  - make sure the job is set as `interruptible: true`
  Gotcha:
  - this is only possible when running with a bosh director as the director is performing the update. If your concourse is deployed using bosh create-env you will need to perform the update elsewhere, typically from your workstation


#### "Redeploy Concourse" Job goes orange
  Symptom
   - when using Concourse to BOSH deploy itself, typically the job will error with "worker for container not found." This is expected as the bosh director will recreate the worker VM.

  Solution:
   - run it again; it should be a no-op the second time after a successful update
   - or just live with an orange build; it was probably a successful redeploy
  Gotcha:
   - this is only possible when running with a bosh director as the director is performing the update. If your concourse is deployed using bosh create-env you will need to perform the update elsewhere, typically from your workstation

#### BOSH Can't Finish Worker Upgrade While Tasks Running
  Symptom:
   - if you have a long running task bosh won't be able to finalize the upgrade by restarting the worker job until all of the worker's jobs (tasks?) have stopped
  Solution:
   - just wait
   - try to avoid long running tasks
     - e.g.: pool-resource if misused
   - cancel running tasks/jobs
